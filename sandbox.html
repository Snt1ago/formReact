<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
  <!-- This setup is not suitable for production. -->
  <!-- Only use it in development! -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script
    async
    src="https://ga.jspm.io/npm:es-module-shims@1.7.0/dist/es-module-shims.js"
  ></script>
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react?dev",
        "react-dom/client": "https://esm.sh/react-dom/client?dev"
      }
    }
  </script>
  <script type="text/babel" data-type="module">
    import React, { StrictMode, useState } from "react";
    import { createRoot } from "react-dom/client";

    function FormularioContacto() {
      // Estado del formulario
      const [formData, setFormData] = useState({
        nombre: "",
        email: "",
        mensaje: "",
      });

      // Estado para manejar el envío
      const [status, setStatus] = useState("");
      const [isSubmitting, setIsSubmitting] = useState(false);

      // Maneja los cambios en los campos del formulario
      const handleChange = (e) => {
        setFormData({
          ...formData,
          [e.target.name]: e.target.value,
        });
      };

      // Maneja el envío del formulario con Formspree
      const handleSubmit = async (e) => {
        e.preventDefault();
        setIsSubmitting(true);
        setStatus("");

        try {
          // REEMPLAZA "xrbzgpde" con tu Form ID real de Formspree
          const response = await fetch("https://formspree.io/f/mpwryqep", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              nombre: formData.nombre,
              email: formData.email,
              mensaje: formData.mensaje,
              _replyto: formData.email,
            }),
          });

          if (response.ok) {
            setStatus("¡Mensaje enviado correctamente!");
            setFormData({ nombre: "", email: "", mensaje: "" });
          } else {
            setStatus("Error al enviar el mensaje. Inténtalo de nuevo.");
          }
        } catch (error) {
          setStatus("Error al enviar el mensaje. Inténtalo de nuevo.");
        } finally {
          setIsSubmitting(false);
        }
      };

      return (
        <div>
          <h1>Formulario de Contacto</h1>
          <form onSubmit={handleSubmit}>
            <div>
              <label htmlFor="nombre">Nombre:</label>
              <input
                type="text"
                id="nombre"
                name="nombre"
                value={formData.nombre}
                onChange={handleChange}
                required
                disabled={isSubmitting}
              />
            </div>

            <div>
              <label htmlFor="email">Email:</label>
              <input
                type="email"
                id="email"
                name="email"
                value={formData.email}
                onChange={handleChange}
                required
                disabled={isSubmitting}
              />
            </div>

            <div>
              <label htmlFor="mensaje">Mensaje:</label>
              <textarea
                id="mensaje"
                name="mensaje"
                value={formData.mensaje}
                onChange={handleChange}
                rows="4"
                required
                disabled={isSubmitting}
              />
            </div>

            <button type="submit" disabled={isSubmitting}>
              {isSubmitting ? "Enviando..." : "Enviar"}
            </button>

            {status && (
              <div
                className={`status-message ${status.includes("Error") ? "error" : "success"}`}
              >
                {status}
              </div>
            )}
          </form>
        </div>
      );
    }

    const root = createRoot(document.getElementById("root"));
    root.render(
      <StrictMode>
        <FormularioContacto />
      </StrictMode>
    );
  </script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: sans-serif;
      margin: 20px;
      padding: 0;
      background-color: #f5f5f5;
    }

    h1 {
      margin-top: 0;
      font-size: 24px;
      color: #333;
      text-align: center;
    }

    form {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    form div {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    input,
    textarea {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: #007bff;
    }

    button {
      background-color: #007bff;
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    textarea {
      resize: vertical;
    }

    .status-message {
      margin-top: 15px;
      padding: 10px;
      border-radius: 4px;
      text-align: center;
      font-weight: bold;
    }

    .status-message.success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .status-message.error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    button:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
    }

    input:disabled,
    textarea:disabled {
      background-color: #f8f9fa;
      cursor: not-allowed;
    }
  </style>
</html>
